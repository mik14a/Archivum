<?xml version="1.0" encoding="utf-8" ?>
<Grid
    x:Class="Archivum.Views.AuthorView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodel="clr-namespace:Archivum.ViewModels"
    Padding="16"
    x:DataType="viewmodel:AuthorViewModel">

    <Grid.RowDefinitions>
        <RowDefinition Height="160" />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>

    <Image
        Grid.Row="0"
        Grid.ColumnSpan="2"
        Aspect="AspectFill"
        Source="{Binding Image}" />
    <Border
        Grid.Row="0"
        Grid.ColumnSpan="2"
        BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground},
                                          Dark={StaticResource DarkBackground}}"
        HeightRequest="24"
        HorizontalOptions="End"
        IsVisible="{Binding IsFavorite}"
        StrokeShape="RoundRectangle 12"
        StrokeThickness="0"
        VerticalOptions="Start"
        WidthRequest="24">
        <Image
            HeightRequest="16"
            Source="{StaticResource IconFavorite}"
            WidthRequest="16" />
    </Border>
    <Label
        Grid.Row="1"
        Grid.Column="0"
        Text="{Binding Name}"
        VerticalOptions="Start" />
    <Label
        Grid.Row="1"
        Grid.Column="1"
        Text="{Binding Count}"
        VerticalOptions="End" />

    <FlyoutBase.ContextFlyout>
        <MenuFlyout>
            <MenuFlyoutItem
                Command="{Binding Path=ToggleFavoriteCommand}"
                CommandParameter="{Binding}"
                IconImageSource="{StaticResource IconFavorite}"
                Text="お気に入り" />
            <MenuFlyoutItem
                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=OpenPropertiesCommand}"
                CommandParameter="{Binding}"
                IconImageSource="{StaticResource IconProperties}"
                Text="プロパティ" />
        </MenuFlyout>
    </FlyoutBase.ContextFlyout>

</Grid>
